<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>celery — Distributed processing — Celery 3.1.23 documentation</title>
<link href="../_static/celery.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.23',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<link href="../copyright.html" rel="copyright" title="Copyright"/>
<link href="../index.html" rel="top" title="Celery 3.1.23 documentation"/>
<link href="index.html" rel="up" title="API Reference"/>
<link href="celery.app.html" rel="next" title="celery.app"/>
<link href="index.html" rel="prev" title="API Reference"/>
</head>
<body role="document">
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="celery.app.html" title="celery.app">next</a> |</li>
<li class="right">
<a accesskey="P" href="index.html" title="API Reference">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../index.html">Celery 3.1.23 documentation</a> »</li>
<li class="nav-item nav-item-1"><a accesskey="U" href="index.html">API Reference</a> »</li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<div class="deck">
<p>
        This document describes the current stable version of Celery (3.1). For development docs,
        <a href="http://docs.celeryproject.org/en/master/reference/celery.html">go here</a>.
        </p>
</div>
<div class="section" id="module-celery">
<span id="celery-distributed-processing"></span><h1><a name="//apple_ref/cpp/Module/celery"></a><a class="reference internal" href="#module-celery" title="celery: Distributed processing"><code class="xref py py-mod docutils literal"><span class="pre">celery</span></code></a> — Distributed processing<a class="headerlink" href="#module-celery" title="Permalink to this headline">¶</a></h1>
<hr class="docutils"/>
<p>This module is the main entry-point for the Celery API.
It includes commonly needed things for calling tasks,
and creating Celery applications.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%"></col>
<col width="71%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#celery.Celery" title="celery.Celery"><code class="xref py py-class docutils literal"><span class="pre">Celery</span></code></a></td>
<td>celery application instance</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#celery.group" title="celery.group"><code class="xref py py-class docutils literal"><span class="pre">group</span></code></a></td>
<td>group tasks together</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#celery.chain" title="celery.chain"><code class="xref py py-class docutils literal"><span class="pre">chain</span></code></a></td>
<td>chain tasks together</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#celery.chord" title="celery.chord"><code class="xref py py-class docutils literal"><span class="pre">chord</span></code></a></td>
<td>chords enable callbacks for groups</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#celery.signature" title="celery.signature"><code class="xref py py-class docutils literal"><span class="pre">signature</span></code></a></td>
<td>object describing a task invocation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#celery.current_app" title="celery.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a></td>
<td>proxy to the current application instance</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#celery.current_task" title="celery.current_task"><code class="xref py py-data docutils literal"><span class="pre">current_task</span></code></a></td>
<td>proxy to the currently executing task</td>
</tr>
</tbody>
</table>
<div class="section" id="celery-application-objects">
<h2><a class="reference internal" href="#celery.Celery" title="celery.Celery"><code class="xref py py-class docutils literal"><span class="pre">Celery</span></code></a> application objects<a class="headerlink" href="#celery-application-objects" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.</span></p>
</div>
<dl class="class">
<dt id="celery.Celery"><a name="//apple_ref/cpp/Class/celery.Celery"></a>
<em class="property">class </em><code class="descclassname">celery.</code><code class="descname">Celery</code><span class="sig-paren">(</span><em>main='__main__'</em>, <em>broker='amqp://localhost//'</em>, <em>…</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>main</strong> – Name of the main module if running as <cite>__main__</cite>.
This is used as a prefix for task names.</li>
<li><strong>broker</strong> – URL of the default broker used.</li>
<li><strong>loader</strong> – The loader class, or the name of the loader class to use.
Default is <a class="reference internal" href="celery.loaders.app.html#celery.loaders.app.AppLoader" title="celery.loaders.app.AppLoader"><code class="xref py py-class docutils literal"><span class="pre">celery.loaders.app.AppLoader</span></code></a>.</li>
<li><strong>backend</strong> – The result store backend class, or the name of the
backend class to use. Default is the value of the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_RESULT_BACKEND"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span></code></a> setting.</li>
<li><strong>amqp</strong> – AMQP object or class name.</li>
<li><strong>events</strong> – Events object or class name.</li>
<li><strong>log</strong> – Log object or class name.</li>
<li><strong>control</strong> – Control object or class name.</li>
<li><strong>set_as_current</strong> – Make this the global current app.</li>
<li><strong>tasks</strong> – A task registry or the name of a registry class.</li>
<li><strong>include</strong> – List of modules every worker should import.</li>
<li><strong>fixups</strong> – List of fixup plug-ins (see e.g.
<code class="xref py py-mod docutils literal"><span class="pre">celery.fixups.django</span></code>).</li>
<li><strong>autofinalize</strong> – If set to False a <a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a>
will be raised if the task registry or tasks are used before
the app is finalized.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="celery.Celery.main"><a name="//apple_ref/cpp/Attribute/celery.Celery.main"></a>
<code class="descname">main</code><a class="headerlink" href="#celery.Celery.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the <cite>__main__</cite> module.  Required for standalone scripts.</p>
<p>If set this will be used instead of <cite>__main__</cite> when automatically
generating task names.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.conf"><a name="//apple_ref/cpp/Attribute/celery.Celery.conf"></a>
<code class="descname">conf</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Current configuration.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.user_options"><a name="//apple_ref/cpp/Attribute/celery.Celery.user_options"></a>
<code class="descname">user_options</code><a class="headerlink" href="#celery.Celery.user_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom options for command-line programs.
See <a class="reference internal" href="../userguide/extending.html#extending-commandoptions"><span>Adding new command-line options</span></a></p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.steps"><a name="//apple_ref/cpp/Attribute/celery.Celery.steps"></a>
<code class="descname">steps</code><a class="headerlink" href="#celery.Celery.steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom bootsteps to extend and modify the worker.
See <a class="reference internal" href="../userguide/extending.html#extending-bootsteps"><span>Installing Bootsteps</span></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.current_task"><a name="//apple_ref/cpp/Attribute/celery.Celery.current_task"></a>
<code class="descname">current_task</code><a class="headerlink" href="#celery.Celery.current_task" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance of the task that is being executed, or <code class="xref py py-const docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.amqp"><a name="//apple_ref/cpp/Attribute/celery.Celery.amqp"></a>
<code class="descname">amqp</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.amqp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.amqp" title="Permalink to this definition">¶</a></dt>
<dd><p>AMQP related functionality: <a class="reference internal" href="celery.app.amqp.html#celery.app.amqp.AMQP" title="celery.app.amqp.AMQP"><code class="xref py py-class docutils literal"><span class="pre">amqp</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.backend"><a name="//apple_ref/cpp/Attribute/celery.Celery.backend"></a>
<code class="descname">backend</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.backend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Current backend instance.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.loader"><a name="//apple_ref/cpp/Attribute/celery.Celery.loader"></a>
<code class="descname">loader</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.loader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Current loader instance.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.control"><a name="//apple_ref/cpp/Attribute/celery.Celery.control"></a>
<code class="descname">control</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Remote control: <a class="reference internal" href="celery.app.control.html#celery.app.control.Control" title="celery.app.control.Control"><code class="xref py py-class docutils literal"><span class="pre">control</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.events"><a name="//apple_ref/cpp/Attribute/celery.Celery.events"></a>
<code class="descname">events</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Consuming and sending events: <a class="reference internal" href="celery.events.html#celery.events.Events" title="celery.events.Events"><code class="xref py py-class docutils literal"><span class="pre">events</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.log"><a name="//apple_ref/cpp/Attribute/celery.Celery.log"></a>
<code class="descname">log</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging: <a class="reference internal" href="celery.app.log.html#celery.app.log.Logging" title="celery.app.log.Logging"><code class="xref py py-class docutils literal"><span class="pre">log</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.tasks"><a name="//apple_ref/cpp/Attribute/celery.Celery.tasks"></a>
<code class="descname">tasks</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Task registry.</p>
<p>Accessing this attribute will also finalize the app.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.pool"><a name="//apple_ref/cpp/Attribute/celery.Celery.pool"></a>
<code class="descname">pool</code><a class="headerlink" href="#celery.Celery.pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Broker connection pool: <a class="reference external" href="http://kombu.readthedocs.org/en/latest/reference/kombu.connection.html#kombu.connection.ConnectionPool" title="(in Kombu v3.0)"><code class="xref py py-class docutils literal"><span class="pre">pool</span></code></a>.
This attribute is not related to the workers concurrency pool.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.Task"><a name="//apple_ref/cpp/Attribute/celery.Celery.Task"></a>
<code class="descname">Task</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Base task class for this app.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.timezone"><a name="//apple_ref/cpp/Attribute/celery.Celery.timezone"></a>
<code class="descname">timezone</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.timezone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.timezone" title="Permalink to this definition">¶</a></dt>
<dd><p>Current timezone for this app.
This is a cached property taking the time zone from the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_TIMEZONE"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_TIMEZONE</span></code></a> setting.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.close"><a name="//apple_ref/cpp/Method/celery.Celery.close"></a>
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close any open pool connections and do any other steps necessary
to clean up after the application.</p>
<p>Only necessary for dynamically created apps for which you can
use the with statement instead:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Celery</span><span class="p">(</span><span class="n">set_as_current</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">app</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.signature"><a name="//apple_ref/cpp/Method/celery.Celery.signature"></a>
<code class="descname">signature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.signature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <code class="xref py py-class docutils literal"><span class="pre">Signature</span></code> bound to this app.
See <a class="reference internal" href="#celery.signature" title="celery.signature"><code class="xref py py-meth docutils literal"><span class="pre">signature()</span></code></a></p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.bugreport"><a name="//apple_ref/cpp/Method/celery.Celery.bugreport"></a>
<code class="descname">bugreport</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.bugreport"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.bugreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string with information useful for the Celery core
developers when reporting a bug.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.config_from_object"><a name="//apple_ref/cpp/Method/celery.Celery.config_from_object"></a>
<code class="descname">config_from_object</code><span class="sig-paren">(</span><em>obj</em>, <em>silent=False</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.config_from_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.config_from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads configuration from object, where object is either
an object or the name of a module to import.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>silent</strong> – If true then import errors will be ignored.</li>
<li><strong>force</strong> – Force reading configuration immediately.
By default the configuration will be read only when required.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="s2">"myapp.celeryconfig"</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapp</span> <span class="kn">import</span> <span class="n">celeryconfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="n">celeryconfig</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt>
<code class="descname">Celery.config_from_envvar(variable_name,</code></dt>
<dt>
<code class="descname">silent=False, force=False)</code></dt>
<dd><p>Read configuration from environment variable.</p>
<p>The value of the environment variable must be the name
of a module to import.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"CELERY_CONFIG_MODULE"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"myapp.celeryconfig"</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_envvar</span><span class="p">(</span><span class="s2">"CELERY_CONFIG_MODULE"</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.autodiscover_tasks"><a name="//apple_ref/cpp/Method/celery.Celery.autodiscover_tasks"></a>
<code class="descname">autodiscover_tasks</code><span class="sig-paren">(</span><em>packages</em>, <em>related_name="tasks"</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.autodiscover_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.autodiscover_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>With a list of packages, try to import modules of a specific name (by
default ‘tasks’).</p>
<p>For example if you have an (imagined) directory tree like this:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="o">/</span><span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
   <span class="n">tasks</span><span class="o">.</span><span class="n">py</span>
   <span class="n">models</span><span class="o">.</span><span class="n">py</span>

<span class="n">bar</span><span class="o">/</span><span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">tasks</span><span class="o">.</span><span class="n">py</span>
    <span class="n">models</span><span class="o">.</span><span class="n">py</span>

<span class="n">baz</span><span class="o">/</span><span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">models</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Then calling <code class="docutils literal"><span class="pre">app.autodiscover_tasks(['foo',</span> <span class="pre">bar',</span> <span class="pre">'baz'])</span></code> will
result in the modules <code class="docutils literal"><span class="pre">foo.tasks</span></code> and <code class="docutils literal"><span class="pre">bar.tasks</span></code> being imported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>packages</strong> – List of packages to search.
This argument may also be a callable, in which case the
value returned is used (for lazy evaluation).</li>
<li><strong>related_name</strong> – The name of the module to find.  Defaults
to “tasks”, which means it look for “module.tasks” for every
module in <code class="docutils literal"><span class="pre">packages</span></code>.</li>
<li><strong>force</strong> – By default this call is lazy so that the actual
autodiscovery will not happen until an application imports the
default modules.  Forcing will cause the autodiscovery to happen
immediately.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.add_defaults"><a name="//apple_ref/cpp/Method/celery.Celery.add_defaults"></a>
<code class="descname">add_defaults</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.add_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.add_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Add default configuration from dict <code class="docutils literal"><span class="pre">d</span></code>.</p>
<p>If the argument is a callable function then it will be regarded
as a promise, and it won’t be loaded until the configuration is
actually needed.</p>
<p>This method can be compared to:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>with a difference that 1) no copy will be made and 2) the dict will
not be transferred when the worker spawns child processes, so
it’s important that the same configuration happens at import time
when pickle restores the object on the other side.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.setup_security"><a name="//apple_ref/cpp/Method/celery.Celery.setup_security"></a>
<code class="descname">setup_security</code><span class="sig-paren">(</span><em>…</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.setup_security"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.setup_security" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the message-signing serializer.
This will affect all application instances (a global operation).</p>
<p>Disables untrusted serializers and if configured to use the <code class="docutils literal"><span class="pre">auth</span></code>
serializer will register the auth serializer with the provided settings
into the Kombu serializer registry.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>allowed_serializers</strong> – List of serializer names, or content_types
that should be exempt from being disabled.</li>
<li><strong>key</strong> – Name of private key file to use.
Defaults to the <a class="reference internal" href="../configuration.html#std:setting-CELERY_SECURITY_KEY"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_SECURITY_KEY</span></code></a> setting.</li>
<li><strong>cert</strong> – Name of certificate file to use.
Defaults to the <a class="reference internal" href="../configuration.html#std:setting-CELERY_SECURITY_CERTIFICATE"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_SECURITY_CERTIFICATE</span></code></a> setting.</li>
<li><strong>store</strong> – Directory containing certificates.
Defaults to the <a class="reference internal" href="../configuration.html#std:setting-CELERY_SECURITY_CERT_STORE"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_SECURITY_CERT_STORE</span></code></a> setting.</li>
<li><strong>digest</strong> – Digest algorithm used when signing messages.
Default is <code class="docutils literal"><span class="pre">sha1</span></code>.</li>
<li><strong>serializer</strong> – Serializer used to encode messages after
they have been signed.  See <a class="reference internal" href="../configuration.html#std:setting-CELERY_TASK_SERIALIZER"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_SERIALIZER</span></code></a> for
the serializers supported.
Default is <code class="docutils literal"><span class="pre">json</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.start"><a name="//apple_ref/cpp/Method/celery.Celery.start"></a>
<code class="descname">start</code><span class="sig-paren">(</span><em>argv=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celery</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.argv" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.argv</span></code></a> if <cite>argv</cite> is not specified.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.task"><a name="//apple_ref/cpp/Method/celery.Celery.task"></a>
<code class="descname">task</code><span class="sig-paren">(</span><em>fun</em>, <em>…</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create a task class out of any callable.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>@app.task
def refresh_feed(url):
    return …
</pre></div>
</div>
<p>with setting extra options:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>@app.task(exchange="feeds")
def refresh_feed(url):
    return …
</pre></div>
</div>
<div class="admonition-app-binding admonition">
<p class="first admonition-title">App Binding</p>
<p>For custom apps the task decorator will return a proxy
object, so that the act of creating the task is not performed
until the task is used or the task registry is accessed.</p>
<p class="last">If you are depending on binding to be deferred, then you must
not access any attributes on the returned object until the
application is fully set up (finalized).</p>
</div>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.send_task"><a name="//apple_ref/cpp/Method/celery.Celery.send_task"></a>
<code class="descname">send_task</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>args</em><span class="optional">[</span>, <em>kwargs</em><span class="optional">[</span>, <em>…</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.send_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.send_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Send task by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – Name of task to call (e.g. <cite>“tasks.add”</cite>).</li>
<li><strong>result_cls</strong> – Specify custom result class. Default is
using <a class="reference internal" href="#celery.Celery.AsyncResult" title="celery.Celery.AsyncResult"><code class="xref py py-meth docutils literal"><span class="pre">AsyncResult()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Otherwise supports the same arguments as <a class="reference internal" href="celery.app.task.html#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><code class="xref py py-meth docutils literal"><span class="pre">Task.apply_async()</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.AsyncResult"><a name="//apple_ref/cpp/Attribute/celery.Celery.AsyncResult"></a>
<code class="descname">AsyncResult</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.AsyncResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new result instance. See <a class="reference internal" href="celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal"><span class="pre">AsyncResult</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.GroupResult"><a name="//apple_ref/cpp/Attribute/celery.Celery.GroupResult"></a>
<code class="descname">GroupResult</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.GroupResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.GroupResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new group result instance.
See <a class="reference internal" href="celery.result.html#celery.result.GroupResult" title="celery.result.GroupResult"><code class="xref py py-class docutils literal"><span class="pre">GroupResult</span></code></a>.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.worker_main"><a name="//apple_ref/cpp/Method/celery.Celery.worker_main"></a>
<code class="descname">worker_main</code><span class="sig-paren">(</span><em>argv=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.worker_main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.worker_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celery worker</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.argv" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.argv</span></code></a> if <cite>argv</cite> is not specified.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.Worker"><a name="//apple_ref/cpp/Attribute/celery.Celery.Worker"></a>
<code class="descname">Worker</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.Worker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.Worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker application. See <a class="reference internal" href="celery.apps.worker.html#celery.apps.worker.Worker" title="celery.apps.worker.Worker"><code class="xref py py-class docutils literal"><span class="pre">Worker</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.WorkController"><a name="//apple_ref/cpp/Attribute/celery.Celery.WorkController"></a>
<code class="descname">WorkController</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.WorkController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.WorkController" title="Permalink to this definition">¶</a></dt>
<dd><p>Embeddable worker. See <a class="reference internal" href="celery.worker.html#celery.worker.WorkController" title="celery.worker.WorkController"><code class="xref py py-class docutils literal"><span class="pre">WorkController</span></code></a>.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.Beat"><a name="//apple_ref/cpp/Attribute/celery.Celery.Beat"></a>
<code class="descname">Beat</code><a class="reference internal" href="../_modules/celery/app/base.html#Celery.Beat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.Beat" title="Permalink to this definition">¶</a></dt>
<dd><p>Celerybeat scheduler application.
See <a class="reference internal" href="celery.apps.beat.html#celery.apps.beat.Beat" title="celery.apps.beat.Beat"><code class="xref py py-class docutils literal"><span class="pre">Beat</span></code></a>.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.connection"><a name="//apple_ref/cpp/Method/celery.Celery.connection"></a>
<code class="descname">connection</code><span class="sig-paren">(</span><em>url=default</em><span class="optional">[</span>, <em>ssl</em><span class="optional">[</span>, <em>transport_options={}</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a connection to the message broker.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> – Either the URL or the hostname of the broker to use.</li>
<li><strong>hostname</strong> – URL, Hostname/IP-address of the broker.
If an URL is used, then the other argument below will
be taken from the URL instead.</li>
<li><strong>userid</strong> – Username to authenticate as.</li>
<li><strong>password</strong> – Password to authenticate with</li>
<li><strong>virtual_host</strong> – Virtual host to use (domain).</li>
<li><strong>port</strong> – Port to connect to.</li>
<li><strong>ssl</strong> – Defaults to the <a class="reference internal" href="../configuration.html#std:setting-BROKER_USE_SSL"><code class="xref std std-setting docutils literal"><span class="pre">BROKER_USE_SSL</span></code></a> setting.</li>
<li><strong>transport</strong> – defaults to the <a class="reference internal" href="../configuration.html#std:setting-BROKER_TRANSPORT"><code class="xref std std-setting docutils literal"><span class="pre">BROKER_TRANSPORT</span></code></a>
setting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns <a class="reference external" href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection" title="(in Kombu v3.0)"><code class="xref py py-class docutils literal"><span class="pre">kombu.Connection</span></code></a>:</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.connection_or_acquire"><a name="//apple_ref/cpp/Method/celery.Celery.connection_or_acquire"></a>
<code class="descname">connection_or_acquire</code><span class="sig-paren">(</span><em>connection=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.connection_or_acquire"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.connection_or_acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>For use within a with-statement to get a connection from the pool
if one is not already provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>connection</strong> – If not provided, then a connection will be
acquired from the connection pool.</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.producer_or_acquire"><a name="//apple_ref/cpp/Method/celery.Celery.producer_or_acquire"></a>
<code class="descname">producer_or_acquire</code><span class="sig-paren">(</span><em>producer=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.producer_or_acquire"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.producer_or_acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>For use within a with-statement to get a producer from the pool
if one is not already provided</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>producer</strong> – If not provided, then a producer will be
acquired from the producer pool.</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.mail_admins"><a name="//apple_ref/cpp/Method/celery.Celery.mail_admins"></a>
<code class="descname">mail_admins</code><span class="sig-paren">(</span><em>subject</em>, <em>body</em>, <em>fail_silently=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.mail_admins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.mail_admins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an email to the admins in the <a class="reference internal" href="../configuration.html#std:setting-ADMINS"><code class="xref std std-setting docutils literal"><span class="pre">ADMINS</span></code></a> setting.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.select_queues"><a name="//apple_ref/cpp/Method/celery.Celery.select_queues"></a>
<code class="descname">select_queues</code><span class="sig-paren">(</span><em>queues=[]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.select_queues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.select_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a subset of queues, where queues must be a list of queue
names to keep.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.now"><a name="//apple_ref/cpp/Method/celery.Celery.now"></a>
<code class="descname">now</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.now"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.now" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current time and date as a <a class="reference external" href="http://docs.python.org/dev/library/datetime.html#datetime.datetime" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">datetime</span></code></a>
object.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.set_current"><a name="//apple_ref/cpp/Method/celery.Celery.set_current"></a>
<code class="descname">set_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.set_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes this the current app for this thread.</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.finalize"><a name="//apple_ref/cpp/Method/celery.Celery.finalize"></a>
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the app by loading built-in tasks,
and evaluating pending task decorators</p>
</dd></dl>
<dl class="method">
<dt id="celery.Celery.on_configure"><a name="//apple_ref/cpp/Method/celery.Celery.on_configure"></a>
<code class="descname">on_configure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/app/base.html#Celery.on_configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.Celery.on_configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional callback for when the first time the configured is required.</p>
</dd></dl>
<dl class="attribute">
<dt id="celery.Celery.Pickler"><a name="//apple_ref/cpp/Attribute/celery.Celery.Pickler"></a>
<code class="descname">Pickler</code><a class="headerlink" href="#celery.Celery.Pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class used to pickle this application.</p>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="canvas-primitives">
<h2>Canvas primitives<a class="headerlink" href="#canvas-primitives" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../userguide/canvas.html#guide-canvas"><span>Canvas: Designing Workflows</span></a> for more about creating task workflows.</p>
<dl class="class">
<dt id="celery.group"><a name="//apple_ref/cpp/Class/celery.group"></a>
<em class="property">class </em><code class="descclassname">celery.</code><code class="descname">group</code><span class="sig-paren">(</span><em>task1</em><span class="optional">[</span>, <em>task2</em><span class="optional">[</span>, <em>task3</em><span class="optional">[</span>, <em>… taskN</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/canvas.html#group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a group of tasks to be executed in parallel.</p>
<p>Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">[4, 8]</span>
</pre></div>
</div>
<p>A group is lazy so you must call it to take action and evaluate
the group.</p>
<p>Will return a <cite>group</cite> task that when called will then call all of the
tasks in the group (and return a <code class="xref py py-class docutils literal"><span class="pre">GroupResult</span></code> instance
that can be used to inspect the state of the group).</p>
</dd></dl>
<dl class="class">
<dt id="celery.chain"><a name="//apple_ref/cpp/Class/celery.chain"></a>
<em class="property">class </em><code class="descclassname">celery.</code><code class="descname">chain</code><span class="sig-paren">(</span><em>task1</em><span class="optional">[</span>, <em>task2</em><span class="optional">[</span>, <em>task3</em><span class="optional">[</span>, <em>… taskN</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/canvas.html#chain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Chains tasks together, so that each tasks follows each other
by being applied as a callback of the previous task.</p>
<p>If called with only one argument, then that argument must
be an iterable of tasks to chain.</p>
<p>Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">))()</span>
</pre></div>
</div>
<p>is effectively <img alt="(2 + 2) + 4)" class="math" src="../_images/math/b8026451166b64d5c9ee6557023207258f7d4a8d.png"/>:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Calling a chain will return the result of the last task in the chain.
You can get to the other tasks by following the <code class="docutils literal"><span class="pre">result.parent</span></code>‘s:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>
<dl class="class">
<dt id="celery.chord"><a name="//apple_ref/cpp/Class/celery.chord"></a>
<em class="property">class </em><code class="descclassname">celery.</code><code class="descname">chord</code><span class="sig-paren">(</span><em>header</em><span class="optional">[</span>, <em>body</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/canvas.html#chord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.chord" title="Permalink to this definition">¶</a></dt>
<dd><p>A chord consists of a header and a body.
The header is a group of tasks that must complete before the callback is
called.  A chord is essentially a callback for a group of tasks.</p>
<p>Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chord</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])(</span><span class="n">sum_task</span><span class="o">.</span><span class="n">s</span><span class="p">())</span>
</pre></div>
</div>
<p>is effectively <img alt="\Sigma ((2 + 2) + (4 + 4))" class="math" src="../_images/math/0cbdbeced7e18aac1f0c66d746b94f54d958ee68.png"/>:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">12</span>
</pre></div>
</div>
<p>The body is applied with the return values of all the header
tasks as a list.</p>
</dd></dl>
<dl class="class">
<dt id="celery.signature"><a name="//apple_ref/cpp/Class/celery.signature"></a>
<em class="property">class </em><code class="descclassname">celery.</code><code class="descname">signature</code><span class="sig-paren">(</span><em>task=None</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>options={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/celery/canvas.html#signature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the arguments and execution options for a single task invocation.</p>
<p>Used as the parts in a <a class="reference internal" href="#celery.group" title="celery.group"><code class="xref py py-class docutils literal"><span class="pre">group</span></code></a> or to safely pass
tasks around as callbacks.</p>
<p>Signatures can also be created from tasks:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">subtask</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>or the <code class="docutils literal"><span class="pre">.s()</span></code> shortcut:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>task</strong> – Either a task class/instance, or the name of a task.</li>
<li><strong>args</strong> – Positional arguments to apply.</li>
<li><strong>kwargs</strong> – Keyword arguments to apply.</li>
<li><strong>options</strong> – Additional options to <code class="xref py py-meth docutils literal"><span class="pre">Task.apply_async()</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that if the first argument is a <a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>, the other
arguments will be ignored and the values in the dict will be used
instead.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">signature</span><span class="p">(</span><span class="s2">"tasks.add"</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signature</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">{"task": "tasks.add", args=(2, 2), kwargs={}, options={}}</span>
</pre></div>
</div>
<dl class="method">
<dt id="celery.signature.__call__"><a name="//apple_ref/cpp/Method/celery.signature.__call__"></a>
<code class="descname">__call__</code><span class="sig-paren">(</span><em>*args **kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the task directly (in the current process).</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.delay"><a name="//apple_ref/cpp/Method/celery.signature.delay"></a>
<code class="descname">delay</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <a class="reference internal" href="#celery.signature.apply_async" title="celery.signature.apply_async"><code class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></code></a>.</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.apply_async"><a name="//apple_ref/cpp/Method/celery.signature.apply_async"></a>
<code class="descname">apply_async</code><span class="sig-paren">(</span><em>args=()</em>, <em>kwargs={}</em>, <em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.apply_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply this task asynchronously.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> – Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> – Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> – Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="celery.app.task.html#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><code class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></code></a>.</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.apply"><a name="//apple_ref/cpp/Method/celery.signature.apply"></a>
<code class="descname">apply</code><span class="sig-paren">(</span><em>args=()</em>, <em>kwargs={}</em>, <em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#celery.signature.apply_async" title="celery.signature.apply_async"><code class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></code></a> but executed the task inline instead
of sending a task message.</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.freeze"><a name="//apple_ref/cpp/Method/celery.signature.freeze"></a>
<code class="descname">freeze</code><span class="sig-paren">(</span><em>_id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.freeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize the signature by adding a concrete task id.
The task will not be called and you should not call the signature
twice after freezing it as that will result in two task messages
using the same task id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal"><span class="pre">app.AsyncResult</span></code></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.signature.clone"><a name="//apple_ref/cpp/Method/celery.signature.clone"></a>
<code class="descname">clone</code><span class="sig-paren">(</span><em>args=()</em>, <em>kwargs={}</em>, <em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of this signature.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> – Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> – Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> – Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.signature.replace"><a name="//apple_ref/cpp/Method/celery.signature.replace"></a>
<code class="descname">replace</code><span class="sig-paren">(</span><em>args=None</em>, <em>kwargs=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the args, kwargs or options set for this signature.
These are only replaced if the selected is not <code class="xref py py-const docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.link"><a name="//apple_ref/cpp/Method/celery.signature.link"></a>
<code class="descname">link</code><span class="sig-paren">(</span><em>other_signature</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if this task
executes successfully.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">other_signature</span></code> (to work with <a class="reference external" href="http://docs.python.org/dev/library/functools.html#functools.reduce" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">reduce()</span></code></a>).</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.signature.link_error"><a name="//apple_ref/cpp/Method/celery.signature.link_error"></a>
<code class="descname">link_error</code><span class="sig-paren">(</span><em>other_signature</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.link_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if an error occurs
while executing this task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"></col>
<col class="field-body"></col>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">other_signature</span></code> (to work with <a class="reference external" href="http://docs.python.org/dev/library/functools.html#functools.reduce" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">reduce()</span></code></a>)</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="method">
<dt id="celery.signature.set"><a name="//apple_ref/cpp/Method/celery.signature.set"></a>
<code class="descname">set</code><span class="sig-paren">(</span><em>…</em><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set arbitrary options (same as <code class="docutils literal"><span class="pre">.options.update(…)</span></code>).</p>
<p>This is a chaining method call (i.e. it will return <code class="docutils literal"><span class="pre">self</span></code>).</p>
</dd></dl>
<dl class="method">
<dt id="celery.signature.flatten_links"><a name="//apple_ref/cpp/Method/celery.signature.flatten_links"></a>
<code class="descname">flatten_links</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#celery.signature.flatten_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives a recursive list of dependencies (unchain if you will,
but with links intact).</p>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="proxies">
<h2>Proxies<a class="headerlink" href="#proxies" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="celery.current_app"><a name="//apple_ref/cpp/Value/celery.current_app"></a>
<code class="descclassname">celery.</code><code class="descname">current_app</code><a class="headerlink" href="#celery.current_app" title="Permalink to this definition">¶</a></dt>
<dd><p>The currently set app for this thread.</p>
</dd></dl>
<dl class="data">
<dt id="celery.current_task"><a name="//apple_ref/cpp/Value/celery.current_task"></a>
<code class="descclassname">celery.</code><code class="descname">current_task</code><a class="headerlink" href="#celery.current_task" title="Permalink to this definition">¶</a></dt>
<dd><p>The task currently being executed
(only set in the worker, or when eager/apply is used).</p>
</dd></dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a href="celery.app.html" title="celery.app">next</a> |</li>
<li class="right">
<a href="index.html" title="API Reference">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../index.html">Celery 3.1.23 documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="index.html">API Reference</a> »</li>
</ul>
</div>
<div class="footer" role="contentinfo">
        © <a href="../copyright.html">Copyright</a> 2009-2015, Ask Solem &amp; Contributors.
    </div>
</body>
</html>
